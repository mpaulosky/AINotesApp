@rendermode InteractiveServer

@if (IsVisible)
{
	<div class="modal fade show d-block" tabindex="-1" role="dialog" style="background-color: rgba(0,0,0,0.5);">
		<div class="modal-dialog modal-dialog-centered" role="document">
			<div class="modal-content">
				<div class="modal-header @HeaderClass">
					<h5 class="modal-title">@Title</h5>
					<button type="button" class="btn-close" @onclick="OnCancel" aria-label="Close"></button>
				</div>
				<div class="modal-body">
					@Message
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-secondary" @onclick="OnCancel">@CancelText</button>
					<button type="button" class="btn @ConfirmButtonClass" @onclick="OnConfirmClick">@ConfirmText</button>
				</div>
			</div>
		</div>
	</div>
}

@code {
	/// <summary>
	/// Whether the dialog is visible
	/// </summary>
	[Parameter]
	public bool IsVisible { get; set; }

	/// <summary>
	/// Title of the dialog
	/// </summary>
	[Parameter]
	public string Title { get; set; } = "Confirm";

	/// <summary>
	/// Message to display
	/// </summary>
	[Parameter]
	public string Message { get; set; } = "Are you sure?";

	/// <summary>
	/// Text for the confirm button
	/// </summary>
	[Parameter]
	public string ConfirmText { get; set; } = "Confirm";

	/// <summary>
	/// Text for the cancel button
	/// </summary>
	[Parameter]
	public string CancelText { get; set; } = "Cancel";

	/// <summary>
	/// CSS class for the confirm button (e.g., btn-danger, btn-primary)
	/// </summary>
	[Parameter]
	public string ConfirmButtonClass { get; set; } = "btn-danger";

	/// <summary>
	/// CSS class for the modal header
	/// </summary>
	[Parameter]
	public string HeaderClass { get; set; } = "";

	/// <summary>
	/// Callback when confirmed
	/// </summary>
	[Parameter]
	public EventCallback OnConfirm { get; set; }

	/// <summary>
	/// Callback when canceled
	/// </summary>
	[Parameter]
	public EventCallback OnCancel { get; set; }

	private async Task OnConfirmClick()
	{
		if (OnConfirm.HasDelegate)
		{
			await OnConfirm.InvokeAsync();
		}
	}
}